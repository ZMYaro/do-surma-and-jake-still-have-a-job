<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<script type="text/javascript">
			var jungleAudio,
				animTimeout;
			
			// Add service worker.
			if (navigator.serviceWorker) {
				navigator.serviceWorker.register('service_worker.js');
			}
			
			function toggleAnim() {
				if (window.animTimeout) {
					clearTimeout(animTimeout);
					window.animTimeout = undefined;
				}
				document.body.classList.toggle('anim');
				if (document.body.classList.contains('anim')) {
					jingleAudio.play();
					jingleAudio.currentTime = 0;
				}
			}
			
			function toggleMute(ev) {
				jingleAudio.muted = !ev.currentTarget.checked;
			}
			
			window.onload = function () {
				// Allow the user to toggle the animation.
				document.querySelector('#face-container img').onclick =
					document.querySelector('#text-container p').onclick = toggleAnim;
				
				// Implement muting the audio.
				jingleAudio = document.getElementById('jingle-audio');
				jingleAudio.muted = true;
				document.getElementById('sound-toggle').onchange = toggleMute;
				
				// Play the animation automatically once.
				animTimeout = setTimeout(toggleAnim, 1000);
				
			};
		</script>
	</head>
	<body>
		<div id="face-container">
			<img src="jake.png" alt="Jake Archibald thumbs up." />
		</div>
		<div id="text-container">
			<p>Service<br />Worker</p>
		</div>
		<audio src="jingle.mp3" id="jingle-audio"></audio>
		<footer id="footer">
			<input type="checkbox" id="sound-toggle" /><!--
			--><label for="sound-toggle"></label>
			&middot;
			Created by <a href="https://zmyaro.com" target="_blank">Zachary Yaro</a> because of <a href="https://www.youtube.com/watch?v=dR_J4X416hg" target="_blank">this episode of <i>HTTP 203</i></a> (see <a href="https://www.youtube.com/watch?v=dR_J4X416hg&t=171" target="_blank">2:51</a> <a href="https://www.youtube.com/watch?v=dR_J4X416hg&t=194" target="_blank">3:14</a>)
			&middot;
			<a href="https://developers.google.com/web/tools/lighthouse/" target="_blank">Learn about Lighthouse</a>
			&middot;
			<a href="https://developers.google.com/web/ilt/pwa/introduction-to-service-worker" target="_blank">Learn about Service Worker</a>
		</footer>
	</body>
</html>
